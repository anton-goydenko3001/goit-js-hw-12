{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = 'https://pixabay.com/api/';\nconst privateKey = '45452442-4cc5f4d2a2a90f01a49495506';\n\nexport async function fetchData(query, page, perPage) {\n  const response = await axios.get(baseUrl, {\n    params: {\n      key: privateKey,\n      q: query,\n      image_type: 'photo',\n      per_page: perPage,\n      page: page,\n      safesearch: true,\n      orientation: 'horizontal',\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function galleryMarkup(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(hit => {\n      return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${hit.largeImageURL}\" download=false>\n                <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-img\" width=360  onclick=\"return false\" data-source=\"${hit.largeImageURL}\">\n                <ul class=\"description\">\n                    <li>\n                    <p>Likes</p>\n                    <p class=\"description-value\">${hit.likes}</p>\n                    </li>\n                    <li>\n                    <p>Views</p>\n                    <p class=\"description-value\">${hit.views}</p>\n                    </li>\n                    <li>\n                    <p>Comments</p>\n                    <p class=\"description-value\">${hit.comments}</p>\n                    </li>\n                    <li>\n                    <p>Downloads</p>\n                    <p class=\"description-value\">${hit.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n            </li>\n            `;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showMessage(message) {\n  iziToast.show({\n    message: message,\n  });\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('visually-hidden');\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchData } from './js/pixabay-api';\nimport {\n  galleryMarkup,\n  showMessage,\n  showLoader,\n  hideLoader,\n} from './js/render-function.js';\n\nconst form = document.querySelector('.form');\nconst queryInput = document.querySelector('input[name=\"query\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\niziToast.settings({\n  messageColor: '#fafafb',\n  position: 'bottomRight',\n  backgroundColor: '#ef4040',\n  iconColor: '#fafafb',\n  close: false,\n});\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet images;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = queryInput.value.trim();\n  if (query === '') {\n    showMessage('Please enter a search query.');\n    return;\n  }\n  loadMoreButton.classList.add('visually-hidden');\n  gallery.innerHTML = '';\n  page = 1;\n\n  showLoader();\n\n  try {\n    images = await fetchData(query, page, perPage);\n    if (images.hits.length === 0) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoader();\n      return;\n    }\n\n    if (images.hits.length < 15) {\n      loadMoreButton.classList.add('visually-hidden');\n    } else {\n      loadMoreButton.classList.remove('visually-hidden');\n    }\n    galleryMarkup(images.hits);\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n\n  try {\n    loadMoreButton.classList.add('visually-hidden');\n    showLoader();\n\n    images = await fetchData(query, page, perPage);\n    galleryMarkup(images.hits);\n    lightbox.refresh();\n\n    const galleryCard = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    const cardSize = galleryCard.height;\n    window.scrollBy({\n      top: cardSize * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n    if (images.total <= Math.ceil(page * perPage)) {\n      loadMoreButton.classList.add('visually-hidden');\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreButton.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["baseUrl","privateKey","fetchData","query","page","perPage","axios","galleryMarkup","images","gallery","markup","hit","showMessage","message","iziToast","showLoader","hideLoader","form","queryInput","loadMoreButton","lightbox","SimpleLightbox","event","error","cardSize"],"mappings":"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"}